SQL Server Triggers and Transactions ExamplesBu belge, bir SQL Server betiÄŸi (trigger.sql) iÃ§inde yer alan Tetikleyiciler (Triggers) ve Ä°ÅŸlemler (Transactions) kavramlarÄ±na ait pratik Ã¶rneklerin detaylÄ± bir Ã¶zetini sunar.ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e AÃ§Ä±klamağŸ“ Proje BaÅŸlÄ±ÄŸÄ±SQL Server Tetikleyicileri ve Ä°ÅŸlemleri (Triggers & Transactions) Ã–rnekleriğŸ’¡ GiriÅŸBu SQL dosyasÄ±, SQL Server veritabanÄ± yÃ¶netim sisteminde kullanÄ±lan Tetikleyiciler (Triggers) ve Ä°ÅŸlemler (Transactions) kavramlarÄ±nÄ± gÃ¶stermektedir. Dosya, veritabanÄ± olaylarÄ±na (INSERT, UPDATE, DELETE gibi DML iÅŸlemleri) otomatik olarak tepki veren Ã¶zel saklÄ± yordamlar olan tetikleyicilerin nasÄ±l oluÅŸturulacaÄŸÄ±nÄ± ve kullanÄ±lacaÄŸÄ±nÄ± gÃ¶steren Ã§eÅŸitli Ã¶rnekler iÃ§ermektedir. AyrÄ±ca, veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼nÃ¼ saÄŸlamak iÃ§in kullanÄ±lan iÅŸlem bloklarÄ±na (BEGIN TRANSACTION, COMMIT, ROLLBACK TRANSACTION) dair uygulamalar da mevcuttur.ğŸ”‘ Anahtar KavramlarKavram (Concept)TanÄ±m (Definition)DML TetikleyicileriINSERT, UPDATE ve DELETE gibi Veri ManipÃ¼lasyon Dili (DML) olaylarÄ±na yanÄ±t veren tetikleyiciler.AFTER/FOR TetikleyicileriDML olayÄ±ndan sonra Ã§alÄ±ÅŸan tetikleyicilerdir, genellikle denetim (logging) veya veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼ iÅŸlemlerinde kullanÄ±lÄ±rlar.Sanal TablolarTetikleyicilerin iÃ§inde, iÅŸlemden etkilenen verileri geÃ§ici olarak tutan Ã¶zel sanal tablolardÄ±r. INSERTED yeni, DELETED eski veriyi iÃ§erir.Ä°ÅŸlemler (Transactions)Bir dizi SQL komutunu tek bir mantÄ±ksal Ã§alÄ±ÅŸma birimi olarak yÃ¼rÃ¼ten bloklardÄ±r; ya hepsi baÅŸarÄ±lÄ± olur (COMMIT) ya da hepsi baÅŸarÄ±sÄ±z olursa geri alÄ±nÄ±r (ROLLBACK).Ä°ÅŸlem KontrolÃ¼BEGIN TRAN (baÅŸlatÄ±r), COMMIT TRAN (onaylar), ROLLBACK TRAN (geri alÄ±r), SAVE TRANSACTION (kayÄ±t noktasÄ± oluÅŸturur).ğŸ› ï¸ Dosya Ä°Ã§eriÄŸi Ã–zetiDosya, aÅŸaÄŸÄ±daki iÅŸlemleri gerÃ§ekleÅŸtiren SQL kod parÃ§alarÄ±nÄ± iÃ§erir:Denetim (Audit) Tetikleyicileri: trgAnektSonuc, dbo.trgEmployeeUpdate, dbo.trgEmployeeInsert, trgAnketSonuc.Veri GiriÅŸi Ã–rneÄŸi: Kisi tablosuna veri ekleme (INSERT).KarmaÅŸÄ±k Tetikleyici Ã–rneÄŸi: trgAnketSonucInsert (HatalÄ± kendi kendine INSERT giriÅŸimi iÃ§erir).Rastgele Veri SeÃ§me: Kisi tablosundan rastgele bir kayÄ±t seÃ§me Ã¶rneÄŸi (NEWID() kullanÄ±mÄ±).Ä°ÅŸlem (Transaction) Ã–rnekleri:SAVE TRANSACTION ve ROLLBACK TRANSACTION kullanarak bir iÅŸlem iÃ§inde belirli bir noktaya geri dÃ¶nme.Basit UPDATE iÅŸlemi ve @@TRANCOUNT ile iÅŸlem sayÄ±sÄ±nÄ± kontrol etme.BaÅŸlatÄ±lan bir iÅŸlemin ROLLBACK ile geri alÄ±narak tablodaki deÄŸiÅŸimin iptal edilmesi.ğŸ‡¬ğŸ‡§ English ExplanationğŸ“ Project TitleSQL Server Triggers and Transactions ExamplesğŸ’¡ IntroductionThis SQL file demonstrates the concepts of Triggers and Transactions used within the SQL Server database management system. The file contains various examples illustrating how to create and use triggersâ€”special stored procedures that automatically respond to database events (DML operations like INSERT, UPDATE, DELETE). It also includes applications of transaction blocks (BEGIN TRANSACTION, COMMIT, ROLLBACK TRANSACTION) used to ensure data integrity.ğŸ”‘ Key ConceptsConceptDefinitionDML TriggersTriggers that respond to Data Manipulation Language (DML) events such as INSERT, UPDATE, and DELETE.AFTER/FOR TriggersTriggers that execute after the DML event, commonly used for auditing (logging) or data integrity processes.Virtual TablesSpecial virtual tables that temporarily hold the data affected by the operation inside the triggers. INSERTED contains new rows, and DELETED contains old rows.TransactionsBlocks that execute a series of SQL commands as a single logical unit of work; either all succeed (COMMIT) or all are reverted if any fail (ROLLBACK).Transaction ControlBEGIN TRAN (starts), COMMIT TRAN (terminates successfully), ROLLBACK TRAN (reverts), SAVE TRANSACTION (creates a savepoint).ğŸ› ï¸ File Content SummaryThe file contains SQL code snippets that perform the following operations:Auditing Triggers: trgAnektSonuc, dbo.trgEmployeeUpdate, dbo.trgEmployeeInsert, trgAnketSonuc.Data Insertion Example: Inserting data into the Kisi table (INSERT).Complex Trigger Example: trgAnketSonucInsert (Contains complex logic and an erroneous self-INSERT attempt).Random Data Selection: Example of selecting a random record from the Kisi table (using NEWID()).Transaction Examples:Using SAVE TRANSACTION and ROLLBACK TRANSACTION to revert to a specific point within a transaction.Simple UPDATE operation and checking the transaction count with @@TRANCOUNT.Canceling a change in a table by rolling back a started transaction.
